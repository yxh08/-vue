<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Title</title>
  </head>
  <body>
    <script>
      /**
       * test weakmap 的弱引用测试
       */
      let testkey = { key: 'testkey' }
      let testvalue = { value: 'testvalue' }
      const wmap = new WeakMap()
      wmap.set(testkey, testvalue)
      // testkey = undefined
      testvalue = undefined
      setTimeout(() => {
        // console.log('wmap', wmap.get(testkey))
      }, 20000)

      /**
       * test weakSet 测试
       */
      let svalue = { svalue: 'testvalue' }
      const wset = new WeakSet()
      wset.add(svalue)
      svalue = undefined
      setTimeout(() => {
        console.log('wset', wset)
      }, 30000)
    </script>
  </body>
</html>
